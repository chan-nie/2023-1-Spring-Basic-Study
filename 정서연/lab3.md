# 3주차 과제

### 스프링 의존성 주입 방법 조사 (dependency injection)

- 의존성 주입을 사용해야 하는 이유
    
    테스트가 용이하며 코드의 재사용성을 높여준다.
    
    객체 간의 의존성을 줄이거나 없앨 수 있고 결합도를 낮추면서 유연한 코드를 작성할 수 있다.
    
- 의존성 주입 3가지
    - 생성자 주입(Constructor Injection)
        
        생성자를 통해서 의존 관계를 주입받는 방법
        
        생성자에 @Autowired를 하면 스프링 컨테이너에 @Component로 등록된 빈에서 생성자에 필요한 빈들을 주입한다.
        
        특징:
        
        생성자 호출 시점에서 1번만 호출되는 것 보장
        
        불변과 필수 의존 관계에 사용
        
        생성자가 1개만 존재하는 경우 @Autowired 생략해도 자동 주입
        
        NullPointerException 방지
        
        주입받을 필드 final 선언 가능
        
    - 필드 주입(Field Injection)
        
        필드에 @Autowired를 붙여서 바로 주입하는 방법
        
        특징:
        
        코드 간결. 단, 외부에서 변경이 불가능하여 테스트하기 어려움
        
        DI 프레임워크가 없으면 아무것도 할 수 없음, 순수 자바 코드로 테스트하기 어려움
        
        애플리케이션의 실제 코드와 상관없는 특정 테스트를 할 때 사용
        
        정상적인 작동에 setter 필요
        
        불변 속성도 가변 속성도 아닌 애매함
        
    - 수정자 주입(Setter Injection)
        
        setter라고 불리는 필드 값을 변경하는 수정자 메서드를 통해서 의존 관계를 주입하는 방법
        
        @Component를 통해 실행하는 클래스를 스프링 빈으로 등록, 의존관계를 주입하게 된다.
        
        @Autowired가 있는 수정자들을 자동으로 의존관계를 주입한다.
        
        특징:
        
        선택과 변경 가능성이 있는 의존 관계에 사용
        
        자바 빈 프로퍼티 규약의 수정자 메서드 방식을 사용하는 방법
        
        set필드명 메서드를 생성하여 의존 관계 주입
        
        @Autowired를 입력하지 않으면 실행 불가
        
- 권장하는 방식
    
    생성자 주입
    
    1. 순환 참조를 방지할 수 있다.
        
        여러 컴포넌트 간에 의존성이 생기는데 생성자를 통해 주입하면 BeanCurrentlyInCreationException이 발생하게 되어 순환 참조 뿐만아니라 의존 관계에 내용을 외부로 노출 시킴으로써 어플리케이션 실행 시점에서 오류를 체크할 수 있다.
        
    2. 불변성이 보장된다.
        
        final로 선언할 수 있고 이로인해 런타임에서 의존성을 주입받는 객체가 변하지 않는다.
        
    3. 누락 발생시
        
        의존 관계 주입 누락시 호출했을 때 NPE(NullPointException)가 발생하는데 생성자 주입을 사용하면 주입 데이터 누락 시 컴파일 오류가 발생해 누락이 발생하더라도 실행되는 일이 없어진다.